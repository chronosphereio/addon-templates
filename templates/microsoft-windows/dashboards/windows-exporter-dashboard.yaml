api_version: v1/config
kind: Dashboard
spec:
  slug: windows-exporter
  name: Windows Exporter
  collection_slug: chronosphere-collection
  dashboard_json: '{"kind":"Dashboard","spec":{"datasource":null,"duration":"12h","layouts":[{"kind":"Grid","spec":{"display":{"collapse":{"open":true},"title":"Summary"},"items":[{"content":{"$ref":"#/spec/panels/InstanceswithNetworkErrors-1"},"height":5,"width":3,"x":0,"y":0},{"content":{"$ref":"#/spec/panels/InstanceswithNetworkErrors-2"},"height":5,"width":3,"x":3,"y":0},{"content":{"$ref":"#/spec/panels/HostswithhighCPU"},"height":5,"width":3,"x":6,"y":0},{"content":{"$ref":"#/spec/panels/InstanceswithLowMemoryUsage-3"},"height":5,"width":3,"x":9,"y":0},{"content":{"$ref":"#/spec/panels/InstanceswithLowMemoryUsage"},"height":5,"width":3,"x":12,"y":0},{"content":{"$ref":"#/spec/panels/InstanceswithNetworkErrors"},"height":5,"width":3,"x":18,"y":0},{"content":{"$ref":"#/spec/panels/volumeswithlessthan10%freespace"},"height":5,"width":3,"x":15,"y":0}]}},{"kind":"Grid","spec":{"display":{"collapse":{"open":true},"title":"CPU"},"items":[{"content":{"$ref":"#/spec/panels/4"},"height":6,"width":6,"x":0,"y":0},{"content":{"$ref":"#/spec/panels/Per-CPUUtilization"},"height":6,"width":12,"x":12,"y":6},{"content":{"$ref":"#/spec/panels/5"},"height":6,"width":18,"x":6,"y":0},{"content":{"$ref":"#/spec/panels/CPUusagebymode"},"height":6,"width":12,"x":0,"y":6},{"content":{"$ref":"#/spec/panels/AVGCPUFrequencyinHz"},"height":7,"width":18,"x":6,"y":12},{"content":{"$ref":"#/spec/panels/AVGCPUFrequencyinHz-2"},"height":7,"width":6,"x":0,"y":12}]}},{"kind":"Grid","spec":{"display":{"collapse":{"open":true},"title":"Memory"},"items":[{"content":{"$ref":"#/spec/panels/MemoryUsageforInstance"},"height":7,"width":18,"x":6,"y":0},{"content":{"$ref":"#/spec/panels/MemoryUsageforInstance-3"},"height":7,"width":6,"x":0,"y":0}]}},{"kind":"Grid","spec":{"display":{"collapse":{"open":true},"title":"Disk"},"items":[{"content":{"$ref":"#/spec/panels/Disk%Free"},"height":10,"width":9,"x":0,"y":0},{"content":{"$ref":"#/spec/panels/Disk%Free-1"},"height":10,"width":15,"x":9,"y":0},{"content":{"$ref":"#/spec/panels/RateoftotalIOPSfordisks"},"height":11,"width":24,"x":0,"y":10}]}},{"kind":"Grid","spec":{"display":{"collapse":{"open":true},"title":"Info"},"items":[{"content":{"$ref":"#/spec/panels/SystemInfo"},"height":6,"width":12,"x":0,"y":0},{"content":{"$ref":"#/spec/panels/OSInfo"},"height":6,"width":12,"x":12,"y":0}]}}],"panels":{"4":{"kind":"Panel","spec":{"display":{"description":"","name":""},"formulas":[],"links":[],"plugin":{"kind":"Table","spec":{"transform":{"kind":"Aggregation","labelsToColumns":true,"stats":["Min","Max","First","Last","Mean","Sum"]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"100
    - (avg by (instance) (irate(windows_cpu_time_total{mode=\"idle\", instance=~\"$instance\"}[2m]))
    * 100)","queryType":"Instant","series_name":{"name_pattern":"{{instance}}","type":"Labels"}}}}}]}},"5":{"kind":"Panel","spec":{"display":{"description":"","name":""},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"visual":{"area_opacity":0.5,"line_width":1}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"100
    - (avg by (instance) (irate(windows_cpu_time_total{mode=\"idle\", instance=~\"$instance\"}[2m]))
    * 100)","series_name":{"name_pattern":"{{instance}}","type":"Labels"}}}}}]}},"AVGCPUFrequencyinHz":{"kind":"Panel","spec":{"display":{"description":"","name":"AVG
    CPU Frequency in GHz"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"visual":{"area_opacity":0.45,"line_width":1}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"avg
    by(instance) (\n    1e4 * windows_cpu_core_frequency_mhz{instance=~\"$instance\"}\n    *
    rate(windows_cpu_processor_performance_total{instance=~\"$instance\"}[5m])\n    /
    rate(windows_cpu_processor_mperf_total{instance=~\"$instance\"}[5m])\n) / 1000000000"}}}}]}},"AVGCPUFrequencyinHz-2":{"kind":"Panel","spec":{"display":{"description":"","name":"AVG
    CPU Frequency in GHz"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","unit":{"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"avg
    by(instance) (\n    1e4 * windows_cpu_core_frequency_mhz{instance=~\"$instance\"}\n    *
    rate(windows_cpu_processor_performance_total{instance=~\"$instance\"}[5m])\n    /
    rate(windows_cpu_processor_mperf_total{instance=~\"$instance\"}[5m])/1000000000\n)"}}}}]}},"CPUusagebymode":{"kind":"Panel","spec":{"display":{"description":"","name":"CPU
    usage by mode"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"visual":{"area_opacity":0.35,"line_width":1,"stack":"All"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum
    by (instance, mode) (irate(windows_cpu_time_total{instance=~\"$instance\"}[5m]))"}}}}]}},"Disk%Free":{"kind":"Panel","spec":{"display":{"description":"","name":"Disk
    % Used"},"formulas":[],"links":[],"plugin":{"kind":"GaugeChart","spec":{"calculation":"LastNumber","thresholds":{"mode":"Percent","steps":[{"value":75},{"value":85}]},"unit":{"kind":"Percent"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"100
    - (\n(\nwindows_logical_disk_free_bytes {instance=~\"$instance\"}\n/\nwindows_logical_disk_size_bytes
    {instance=~\"$instance\"}\n) * 100\n)","series_name":{"name_pattern":"{{volume}},
    {{instance}}","type":"Labels"}}}}}]}},"Disk%Free-1":{"kind":"Panel","spec":{"display":{"description":"","name":"Disk
    % Used"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"visual":{"area_opacity":0.45,"line_width":1}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"100
    - (\n(\nwindows_logical_disk_free_bytes {instance=~\"$instance\"}\n/\nwindows_logical_disk_size_bytes
    {instance=~\"$instance\"}\n) * 100\n)","series_name":{"name_pattern":"{{volume}},
    {{instance}}","type":"Labels"}}}}}]}},"HostswithhighCPU":{"kind":"Panel","spec":{"display":{"description":"Higher
    than 95%","name":"Hosts with Low CPU Usage"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"steps":[{"value":1}]},"unit":{"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count
    ((100 - (avg by (instance) (irate(windows_cpu_time_total{mode=\"idle\", instance=~\"$instance\"}[2m]))
    * 100)) < 25 ) or on() vector(0)"}}}}]}},"InstanceswithLowMemoryUsage":{"kind":"Panel","spec":{"display":{"description":"","name":"Instances
    with Low Memory Usage"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"steps":[{"value":1}]},"unit":{"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count
    by(instance) (\n(100 - \n  (100 * \n    (windows_memory_physical_free_bytes{instance=~\"$instance\"}
    / windows_memory_physical_total_bytes{instance=~\"$instance\"})\n  )\n)\n< 20)
    or on() vector(0)"}}}}]}},"InstanceswithLowMemoryUsage-3":{"kind":"Panel","spec":{"display":{"description":"","name":"Instances
    with High Memory Usage"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"steps":[{"value":1}]},"unit":{"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count
    by(instance) ((100 - (100 * (windows_memory_physical_free_bytes{instance=~\"$instance\"}
    / windows_memory_physical_total_bytes{instance=~\"$instance\"}))) > 95) or on()
    vector(0)"}}}}]}},"InstanceswithNetworkErrors":{"kind":"Panel","spec":{"display":{"description":"Instances
    with that could not be transmitted or received due to errors","name":"Instances
    with Net Errors"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"steps":[{"value":1}]},"unit":{"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count(count
    by (instance) (\n{__name__=~\"windows_net_packets_outbound_errors_total|windows_net_packets_received_errors_total\",
    instance=~\"$instance\"} > 0\n\n)) or on() vector(0)"}}}}]}},"InstanceswithNetworkErrors-1":{"kind":"Panel","spec":{"display":{"description":"","name":"Total
    Windows Instances"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"steps":[]},"unit":{"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count(count
    by (instance) (windows_cpu_time_total{instance=~\"$instance\"}))"}}}}]}},"InstanceswithNetworkErrors-2":{"kind":"Panel","spec":{"display":{"description":"Higher
    than 95%","name":"Hosts with high CPU Usage"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"steps":[{"value":1}]},"unit":{"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count
    ((100 - (avg by (instance) (irate(windows_cpu_time_total{mode=\"idle\",instance=~\"$instance\"}[2m]))
    * 100)) > 95 ) or on() vector(0)"}}}}]}},"MemoryUsageforInstance":{"kind":"Panel","spec":{"display":{"description":"","name":"Memory
    Usage for Instance "},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"visual":{"area_opacity":0.5,"line_width":1}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"100
    - 100 * windows_memory_physical_free_bytes{instance=~\"$instance\"} / windows_memory_physical_total_bytes{instance=~\"$instance\"}"}}}}]}},"MemoryUsageforInstance-3":{"kind":"Panel","spec":{"display":{"description":"","name":"Memory
    Usage for Instance "},"formulas":[],"links":[],"plugin":{"kind":"GaugeChart","spec":{"calculation":"LastNumber","thresholds":{"steps":[{"value":90},{"value":95}]},"unit":{"kind":"Percent"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"100
    - 100 * windows_memory_physical_free_bytes{instance=~\"$instance\"} / windows_memory_physical_total_bytes{instance=~\"$instance\"}","series_name":{"name_pattern":"{{instance}}","type":"Labels"}}}}}]}},"OSInfo":{"kind":"Panel","spec":{"display":{"description":"","name":"OS
    Info"},"formulas":[],"links":[],"plugin":{"kind":"Table","spec":{"columnOverrides":[{"properties":{"hidden":true},"value":"job"},{"properties":{"hidden":true},"value":"http_scheme"},{"properties":{"hidden":true},"value":"__name__"},{"properties":{"hidden":true},"value":"server_port"},{"properties":{"hidden":false},"value":"revision"},{"properties":{"hidden":true},"value":"net_host_port"},{"properties":{"hidden":true},"value":"service_instance_id"},{"properties":{"hidden":true},"value":"url_scheme"},{"properties":{"hidden":true},"value":"Value"}],"column_order":["__name__","instance","product","build_number","http_scheme","job","major_version","minor_version","net_host_port","revision","server_port","service_instance_id","service_name","url_scheme","version","Value"]}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"windows_os_info{instance=~\"$instance\"}","queryType":"Instant"}}}}]}},"Per-CPUUtilization":{"kind":"Panel","spec":{"display":{"description":"","name":"Per-CPU
    Utilization"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"visual":{"area_opacity":0.5,"colorPalette":"Categorical","line_width":1}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"rate(windows_cpu_processor_utility_total{instance=~\"$instance\"}[5m])
    / rate(windows_cpu_processor_rtc_total{instance=~\"$instance\"}[5m])\n"}}}}]}},"RateoftotalIOPSfordisks":{"kind":"Panel","spec":{"display":{"description":"","name":"Rate
    of total IOPS for disks"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"thresholds":{},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.25,"colorPalette":"Consistent","display":"line","line_width":1}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum
    by(volume, instance) (rate(windows_logical_disk_reads_total{instance=~\"$instance\"}[2m]))
    + sum by(volume, instance) (rate(windows_logical_disk_writes_total{instance=~\"$instance\"}[2m]))"}}}}]}},"SystemInfo":{"kind":"Panel","spec":{"display":{"description":"","name":"System
    Info"},"formulas":[],"links":[],"plugin":{"kind":"Table","spec":{"columnOverrides":[{"properties":{"width":230.296875},"value":"__name__"},{"properties":{"hidden":true},"value":"http_scheme"},{"properties":{"hidden":true},"value":"job"},{"properties":{"hidden":true},"value":"service_name"},{"properties":{"displayName":"Latest
    Value"},"value":"Last"}],"transform":{"kind":"Aggregation","labelsToColumns":true,"stats":["Last"]}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"windows_system_processes{instance=~\"$instance\"}","queryType":"Instant"}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"windows_system_system_up_time{instance=~\"$instance\"}","queryType":"Instant"}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"windows_system_threads{instance=~\"$instance\"}\n"}}}}]}},"volumeswithlessthan10%freespace":{"kind":"Panel","spec":{"display":{"description":"","name":"volumes
    with less than 10% free space"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","unit":{"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count
    by(volume)(\n100 - (\n(\nwindows_logical_disk_free_bytes {instance=~\"$instance\"}\n/\nwindows_logical_disk_size_bytes
    {instance=~\"$instance\"}\n) * 100\n)\n> 90\n) or on() vector(0)"}}}}]}}},"variables":[{"kind":"ListVariable","spec":{"allow_all_value":true,"allow_multiple":true,"default_value":"$__all","display":{"name":"Instance"},"name":"instance","plugin":{"kind":"PrometheusLabelValuesVariable","spec":{"label_name":"instance","matchers":["windows_cpu_logical_processor"]}},"refresh":"DashboardLoad"}}],"events":[]},"spec_version":"1"}'
