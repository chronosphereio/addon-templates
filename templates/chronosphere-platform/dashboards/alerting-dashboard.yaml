api_version: v1/config
kind: Dashboard
spec:
  slug: alerting-overview
  name: Alerting Overview
  collection_slug: chronosphere-platform-collection
  dashboard_json: '{"kind":"Dashboard","spec":{"datasource":null,"duration":"1h","layouts":[{"kind":"Grid","spec":{"display":{"collapse":{"open":true},"title":"Overview"},"items":[{"content":{"$ref":"#/spec/panels/ActiveAlerts"},"height":6,"width":4,"x":0,"y":0},{"content":{"$ref":"#/spec/panels/ActiveAlerts-1"},"height":6,"width":4,"x":4,"y":0},{"content":{"$ref":"#/spec/panels/AlertsbyState"},"height":6,"width":16,"x":8,"y":0}]}},{"kind":"Grid","spec":{"display":{"collapse":{"open":true},"title":"Active Alerts"},"items":[{"content":{"$ref":"#/spec/panels/CountofAlertsFiringbyName"},"height":9,"width":12,"x":0,"y":0},{"content":{"$ref":"#/spec/panels/AlertsbyServices"},"height":9,"width":12,"x":12,"y":0},{"content":{"$ref":"#/spec/panels/AlertsintheLastHour"},"height":9,"width":24,"x":0,"y":9},{"content":{"$ref":"#/spec/panels/AlertsintheLastHour-1"},"height":9,"width":24,"x":0,"y":18}]}},{"kind":"Grid","spec":{"display":{"collapse":{"open":true},"title":"Detailed View"},"items":[{"content":{"$ref":"#/spec/panels/AllAlerts"},"height":18,"width":24,"x":0,"y":0}]}}],"panels":{"ActiveAlerts":{"kind":"Panel","spec":{"display":{"description":"","name":"Active Alerts"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","unit":{"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count(ALERTS{env=~\"$environment\", alertstate=~\"firing\"})"}}}}]}},"ActiveAlerts-1":{"kind":"Panel","spec":{"display":{"description":"","name":"Pending Alerts"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","unit":{"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count(ALERTS{alertstate=~\"pending\", environment=~\"$environment\"})"}}}}]}},"AlertsbyServices":{"kind":"Panel","spec":{"display":{"description":"","name":"Alerts by Service"},"formulas":[],"links":[],"plugin":{"kind":"PieChart","spec":{"aggregation_percent":3,"label_format":["Percent","Value"],"legend":{"mode":"List","position":"Right","size":"Small"},"unit":{"abbreviate":true,"kind":"Decimal"},"visual":{"color_palette":"Categorical","display":"Donut","show_series_name":true}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count by (service_name) (ALERTS{alertstate=~\"firing\", environment=~\"$environment\", service_name!=\"\"} )","series_name":{"name_pattern":"{{ service_name }}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count by (service_name) (ALERTS{alertstate=~\"firing\", environment=~\"$environment\", service_name=\"\"} )","series_name":{"name_pattern":"No Associated Service","type":"Labels"}}}}}]}},"AlertsbyState":{"kind":"Panel","spec":{"display":{"description":"","name":"Active Alerts by Severity"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","size":"Small"},"overrides":[{"matcher":{"type":"ByName"},"properties":{"color":"#ea4747"},"value":"critical"},{"matcher":{"type":"ByName"},"properties":{"color":"#feca8d"},"value":"warn"}],"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.3,"colorPalette":"Consistent","display":"bar","line_width":1,"stack":"All"},"y_axis":{"label":"","show":true,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"30s","query":"sum by (severity) (ALERTS{alertstate=~\"firing\", environment=~\"$environment\"})","series_name":{"name_pattern":"{{ severity }}","type":"Labels"}}}}}]}},"AlertsintheLastHour":{"kind":"Panel","spec":{"display":{"description":"","name":"Alerts in the Last Hour"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count_over_time(sum by (alertname) (ALERTS{alertstate=\"firing\"})[1h:])","series_name":{"name_pattern":"{{ alertname }}","type":"Labels"}}}}}]}},"AlertsintheLastHour-1":{"kind":"Panel","spec":{"display":{"description":"","name":"Alerts by Notification Policy"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum by(__chrono_policy_slug) (ALERTS{alertstate=\"firing\"})","series_name":{"name_pattern":"{{ __chrono_policy_slug }}","type":"Labels"}}}}}]}},"AllAlerts":{"kind":"Panel","spec":{"display":{"description":"","name":"All Alerts"},"formulas":[],"links":[],"plugin":{"kind":"Table","spec":{"columnOverrides":[{"properties":{"displayName":"Alert Name","width":null},"value":"alertname"},{"properties":{"displayName":"Notification Policy","width":null},"value":"__chrono_policy_slug"},{"properties":{"displayName":"State","width":null},"value":"alertstate"},{"properties":{"displayName":"Severity","width":150},"value":"severity"},{"properties":{"displayName":"Current"},"value":"Value"},{"properties":{"displayName":"Previous Day"},"value":"Value (2)"},{"properties":{"displayName":"Previous Week"},"value":"Value (3)"}],"column_order":["alertname","__chrono_policy_slug","alertstate","severity","Value"],"sort":[{"sortBy":"severity","sortOrder":"asc"},{"sortBy":"Value","sortOrder":"desc"}],"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count by (alertname, __chrono_policy_slug, alertstate, severity) (ALERTS{environment=~\"$environment\"})","queryType":"Instant"}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count by (alertname, __chrono_policy_slug, alertstate, severity) (ALERTS{environment=~\"$environment\"} offset 1d)","queryType":"Instant"}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count by (alertname, __chrono_policy_slug, alertstate, severity) (ALERTS{environment=~\"$environment\"} offset 1w)","queryType":"Instant"}}}}]}},"CountofAlertsFiringbyName":{"kind":"Panel","spec":{"display":{"description":"","name":"Top 10 Active Alerts"},"formulas":[],"links":[],"plugin":{"kind":"BarChart","spec":{"calculation":"LastNumber","limit":25,"mode":"value","sort":"desc","unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"topk(10, count by (alertname)(ALERTS{alertstate=\"firing\", environment=~\"$environment\"}))","series_name":{"name_pattern":"{{ alertname }}","type":"Labels"}}}}}]}}},"variables":[{"kind":"ListVariable","spec":{"allow_all_value":true,"allow_multiple":true,"custom_all_value":".*","default_value":"$__all","display":{"name":"Environment"},"name":"environment","plugin":{"kind":"PrometheusLabelValuesVariable","spec":{"label_name":"env"}},"refresh":"TimeRangeUpdate"}}],"events":[{"kind":"QueryEvent","spec":{"name":"Overlay Deployments","plugin":{"kind":"TimelineEventQuery","spec":{"query":"category = \"deploys\""}}}}]},"spec_version":"1"}'
