api_version: v1/config
kind: Dashboard
spec:
  slug: cassandra-jmx-exporter
  name: Cassandra JMX Exporter
  collection_slug: cassandra-collection
  dashboard_json: '{"kind":"Dashboard","spec":{"events":[],"panels":{"containers-31":{"kind":"Panel","spec":{"display":{"name":"Containers"},"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","unit":{"abbreviate":false,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"count(rate(container_last_seen{name=~\".+\",instance=~\"$node\",pod=~\"$pod.*\"}[$interval]))*81"}}}}]}},"cpuLimitUtilization-40":{"kind":"Panel","spec":{"display":{"name":"CPULimitUtilization"},"plugin":{"kind":"Table","spec":{"transform":{"kind":"Aggregation","stats":["LastNumber"]}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"avg(rate(container_cpu_usage_seconds_total{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}[$interval])/on(namespace,pod,id)((container_spec_cpu_quota{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}>0)/100000))by(namespace,pod)","series_name":{"name_pattern":"{{pod}}","type":"Labels"}}}}}]}},"cpuUsage-5":{"kind":"Panel","spec":{"display":{"name":"CPUUsage"},"plugin":{"kind":"TimeSeriesChart","spec":{"overrides":[{"matcher":{"type":"ByName"},"properties":{"color":"#BA43A9"},"value":"{id=\"/\",instance=\"cadvisor:8080\",job=\"prometheus\"}"}],"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"PercentDecimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(rate(container_cpu_usage_seconds_total{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}[$interval]))","series_name":{"name_pattern":"Containers","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(rate(container_cpu_usage_seconds_total{instance=~\"$node\",id=\"/\"}[$interval]))","series_name":{"name_pattern":"Node","type":"Labels"}}}}}]}},"cpuUsageperPod-1":{"kind":"Panel","spec":{"display":{"name":"CPUUsageperPod"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"Table","position":"Right","values":[]},"tooltip":{"mode":"nearby"},"visual":{},"y_axis":{"unit":{"abbreviate":true,"kind":"PercentDecimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"head_max(sum(rate(container_cpu_usage_seconds_total{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}[$interval]))by(namespace,pod),20)","series_name":{"name_pattern":"{{namespace}}{{pod}}","type":"Labels"}}}}}]}},"diskLimitUtilization-46":{"kind":"Panel","spec":{"display":{"name":"DiskLimitUtilization"},"plugin":{"kind":"Table","spec":{"transform":{"kind":"Aggregation","stats":["LastNumber"]}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"avg(container_fs_usage_bytes{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}/on(namespace,pod,id)container_fs_limit_bytes{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"})by(namespace,pod)","series_name":{"name_pattern":"{{pod}}","type":"Labels"}}}}}]}},"diskspace-26":{"kind":"Panel","spec":{"display":{"name":"Diskspace"},"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"steps":[{"value":0.75},{"value":0.9}]},"unit":{"abbreviate":true,"decimal_places":1,"kind":"PercentDecimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"1-((sum(node_filesystem_avail_bytes))/sum(node_filesystem_size_bytes))"}}}}]}},"load-27":{"kind":"Panel","spec":{"display":{"name":"Load"},"plugin":{"kind":"StatChart","spec":{"calculation":"Mean","sparkline":{},"thresholds":{"steps":[{"value":0.8},{"value":0.9}]},"unit":{"abbreviate":true,"decimal_places":0,"kind":"PercentDecimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"avg(node_load1)/count(count(node_cpu_seconds_total)by(cpu))"}}}}]}},"memory-25":{"kind":"Panel","spec":{"display":{"name":"Memory"},"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"steps":[{"value":70},{"value":90}]},"unit":{"abbreviate":true,"decimal_places":0,"kind":"PercentDecimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"(sum(node_memory_MemTotal_bytes)-sum(node_memory_MemAvailable_bytes))/sum(node_memory_MemTotal_bytes)"}}}}]}},"memoryLimitUtilization-35":{"kind":"Panel","spec":{"display":{"name":"MemoryLimitUtilization"},"plugin":{"kind":"Table","spec":{"transform":{"kind":"Aggregation","stats":["LastNumber"]}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"avg(container_memory_usage_bytes{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}/(container_spec_memory_limit_bytes{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}>0))by(namespace,pod)","series_name":{"name_pattern":"{{pod}}","type":"Labels"}}}}}]}},"memoryUsageperPod-10":{"kind":"Panel","spec":{"display":{"name":"MemoryUsageperPod"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"Table","position":"Right","values":[]},"tooltip":{"mode":"nearby"},"visual":{},"y_axis":{"unit":{"abbreviate":true,"kind":"Bytes"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(container_memory_usage_bytes{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"})by(namespace,pod)","series_name":{"name_pattern":"{{namespace}}{{pod}}","type":"Labels"}}}}}]}},"networkTraffic-19":{"kind":"Panel","spec":{"display":{"name":"NetworkTraffic"},"plugin":{"kind":"TimeSeriesChart","spec":{"overrides":[{"matcher":{"type":"ByName"},"properties":{"color":"#BF1B00"},"value":"SENT"}],"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Bytes"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(rate(container_network_receive_bytes_total{instance=~\"$node\",id=\"/\"}[$interval]))","series_name":{"name_pattern":"Node-RECEIVED","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"-sum(rate(container_network_transmit_bytes_total{instance=~\"$node\",id=\"/\"}[$interval]))","series_name":{"name_pattern":"Node-SENT","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(rate(container_network_receive_bytes_total{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}[$interval]))","series_name":{"name_pattern":"Containers-RECEIVED","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"-sum(rate(container_network_transmit_bytes_total{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}[$interval]))","series_name":{"name_pattern":"Containers-SENT","type":"Labels"}}}}}]}},"persistentVolumeUsage-51":{"kind":"Panel","spec":{"display":{"name":"PersistentVolumeUsage"},"plugin":{"kind":"TimeSeriesChart","spec":{"overrides":[{"matcher":{"type":"ByName"},"properties":{"color":"#BA43A9"},"value":"{id=\"/\",instance=\"cadvisor:8080\",job=\"prometheus\"}"}],"tooltip":{"mode":"single"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Bytes"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"tail_min(kubelet_volume_stats_available_bytes,10)","series_name":{"name_pattern":"{{persistentvolumeclaim}}{{namespace}}","type":"Labels"}}}}}]}},"receivedNetworkTrafficperPod-8":{"kind":"Panel","spec":{"display":{"name":"ReceivedNetworkTrafficperPod"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"Table","position":"Right","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(rate(container_network_receive_bytes_total{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}[$interval]))by(namespace,pod)","series_name":{"name_pattern":"{{namespace}}{{pod}}","type":"Labels"}}}}}]}},"sentNetworkTrafficperPod-9":{"kind":"Panel","spec":{"display":{"name":"SentNetworkTrafficperPod"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"Table","position":"Right","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"max":8,"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(rate(container_network_transmit_bytes_total{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}[$interval]))by(namespace,pod)","series_name":{"name_pattern":"{{namespace}}{{pod}}","type":"Labels"}}}}}]}},"topCpuLimits-45":{"kind":"Panel","spec":{"display":{"name":"TopCPULimits"},"plugin":{"kind":"Table","spec":{"transform":{"kind":"Aggregation","stats":["LastNumber"]}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum((container_spec_cpu_quota{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}>0)/100000)by(namespace,pod)","series_name":{"name_pattern":"{{pod}}","type":"Labels"}}}}}]}},"topCpuUsage-42":{"kind":"Panel","spec":{"display":{"name":"TopCPUUsage"},"plugin":{"kind":"Table","spec":{"transform":{"kind":"Aggregation","stats":["LastNumber"]}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(rate(container_cpu_usage_seconds_total{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}[$interval]))by(namespace,pod)","series_name":{"name_pattern":"{{pod}}","type":"Labels"}}}}}]}},"topDiskLimits-50":{"kind":"Panel","spec":{"display":{"name":"TopDiskLimits"},"plugin":{"kind":"Table","spec":{"transform":{"kind":"Aggregation","stats":["LastNumber"]}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(container_fs_limit_bytes{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}>0)by(namespace,pod)","series_name":{"name_pattern":"{{pod}}","type":"Labels"}}}}}]}},"topDiskUsage-37":{"kind":"Panel","spec":{"display":{"name":"TopDiskUsage"},"plugin":{"kind":"Table","spec":{"transform":{"kind":"Aggregation","stats":["LastNumber"]}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(container_fs_usage_bytes{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"})by(namespace,pod)","series_name":{"name_pattern":"{{pod}}","type":"Labels"}}}}}]}},"topMemoryLimits-41":{"kind":"Panel","spec":{"display":{"name":"TopMemoryLimits"},"plugin":{"kind":"Table","spec":{"transform":{"kind":"Aggregation","stats":["LastNumber"]}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(container_spec_memory_limit_bytes{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"}>0)by(namespace,pod)","series_name":{"name_pattern":"{{pod}}","type":"Labels"}}}}}]}},"topMemoryUsage-49":{"kind":"Panel","spec":{"display":{"name":"TopMemoryUsage"},"plugin":{"kind":"Table","spec":{"transform":{"kind":"Aggregation","stats":["LastNumber"]}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(container_memory_usage_bytes{instance=~\"$node\",name=~\".+\",pod=~\"$pod.*\"})by(namespace,pod)","series_name":{"name_pattern":"{{pod}}","type":"Labels"}}}}}]}},"uptime-24":{"kind":"Panel","spec":{"display":{"name":"Uptime"},"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","unit":{"abbreviate":true,"decimal_places":0,"kind":"Seconds"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"avg(time()-node_boot_time_seconds)"}}}}]}}},"layouts":[{"kind":"Grid","spec":{"items":[{"x":0,"y":0,"width":4,"height":5,"content":{"$ref":"#/spec/panels/uptime-24"}},{"x":4,"y":0,"width":4,"height":5,"content":{"$ref":"#/spec/panels/containers-31"}},{"x":8,"y":0,"width":8,"height":5,"content":{"$ref":"#/spec/panels/load-27"}},{"x":16,"y":0,"width":8,"height":5,"content":{"$ref":"#/spec/panels/persistentVolumeUsage-51"}},{"x":0,"y":5,"width":8,"height":6,"content":{"$ref":"#/spec/panels/cpuUsage-5"}},{"x":8,"y":5,"width":8,"height":6,"content":{"$ref":"#/spec/panels/networkTraffic-19"}},{"x":16,"y":5,"width":4,"height":6,"content":{"$ref":"#/spec/panels/memory-25"}},{"x":20,"y":5,"width":4,"height":6,"content":{"$ref":"#/spec/panels/diskspace-26"}},{"x":0,"y":11,"width":12,"height":7,"content":{"$ref":"#/spec/panels/cpuUsageperPod-1"}},{"x":12,"y":11,"width":12,"height":7,"content":{"$ref":"#/spec/panels/memoryUsageperPod-10"}},{"x":0,"y":18,"width":12,"height":7,"content":{"$ref":"#/spec/panels/receivedNetworkTrafficperPod-8"}},{"x":12,"y":18,"width":12,"height":7,"content":{"$ref":"#/spec/panels/sentNetworkTrafficperPod-9"}},{"x":0,"y":25,"width":8,"height":8,"content":{"$ref":"#/spec/panels/cpuLimitUtilization-40"}},{"x":8,"y":25,"width":8,"height":8,"content":{"$ref":"#/spec/panels/topCpuUsage-42"}},{"x":16,"y":25,"width":8,"height":8,"content":{"$ref":"#/spec/panels/topCpuLimits-45"}},{"x":0,"y":33,"width":8,"height":8,"content":{"$ref":"#/spec/panels/memoryLimitUtilization-35"}},{"x":8,"y":33,"width":8,"height":8,"content":{"$ref":"#/spec/panels/topMemoryUsage-49"}},{"x":16,"y":33,"width":8,"height":8,"content":{"$ref":"#/spec/panels/topMemoryLimits-41"}},{"x":0,"y":41,"width":8,"height":8,"content":{"$ref":"#/spec/panels/diskLimitUtilization-46"}},{"x":8,"y":41,"width":8,"height":8,"content":{"$ref":"#/spec/panels/topDiskUsage-37"}},{"x":16,"y":41,"width":8,"height":8,"content":{"$ref":"#/spec/panels/topDiskLimits-50"}}]}}],"variables":[{"kind":"ListVariable","spec":{"allow_all_value":true,"allow_multiple":true,"default_value":"$__all","display":{"name":"Node"},"name":"node","plugin":{"kind":"PrometheusLabelValuesVariable","spec":{"label_name":"instance","matchers":["container_network_receive_bytes_total"]}}}},{"kind":"IntervalVariable","spec":{"auto":true,"auto_min_interval":"1m","display":{"name":"Interval"},"name":"interval","options":["1m","5m","10m","1h"]}},{"kind":"ListVariable","spec":{"allow_all_value":true,"allow_multiple":true,"custom_all_value":".+","default_value":"$__all","display":{"name":"PodGroup"},"name":"pod","plugin":{"kind":"PrometheusLabelValuesVariable","spec":{"label_name":"pod","matchers":["container_network_receive_bytes_total"]}}}}],"duration":"1h"},"spec_version":"1"}'
