api_version: v1/config
kind: Dashboard
spec:
  slug: gcp-cloud-nat-gateway
  name: GCP Cloud NAT Gateway
  collection_slug: gcp-collection
  dashboard_json: '{"kind":"Dashboard","spec":{"datasource":null,"duration":"30m","layouts":[{"kind":"Grid","spec":{"items":[{"content":{"$ref":"#/spec/panels/maximumPortUsage-8"},"height":8,"width":6,"x":0,"y":0},{"content":{"$ref":"#/spec/panels/natAllocationFailed-6"},"height":8,"width":6,"x":6,"y":0},{"content":{"$ref":"#/spec/panels/sentPacketsDroppedPerMinute-5"},"height":8,"width":6,"x":12,"y":0},{"content":{"$ref":"#/spec/panels/receivedPacketsDroppedPerMinute-4"},"height":8,"width":6,"x":18,"y":0},{"content":{"$ref":"#/spec/panels/receivedBytesPerSecond-9"},"height":8,"width":6,"x":0,"y":8},{"content":{"$ref":"#/spec/panels/receivedPacketsPerSecond-10"},"height":8,"width":6,"x":6,"y":8},{"content":{"$ref":"#/spec/panels/sentBytesPerSecond-11"},"height":8,"width":6,"x":12,"y":8},{"content":{"$ref":"#/spec/panels/sentPacketsPerSecond-12"},"height":8,"width":6,"x":18,"y":8},{"content":{"$ref":"#/spec/panels/allocatedPorts-2"},"height":8,"width":6,"x":0,"y":16},{"content":{"$ref":"#/spec/panels/openConnections-13"},"height":8,"width":6,"x":6,"y":16},{"content":{"$ref":"#/spec/panels/newConnectionsPerSecond-7"},"height":8,"width":6,"x":12,"y":16},{"content":{"$ref":"#/spec/panels/closedConnectionsPerMinute-3"},"height":8,"width":6,"x":18,"y":16}]}}],"panels":{"allocatedPorts-2":{"kind":"Panel","spec":{"display":{"name":"Allocated
    Ports"},"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05,"line_width":1.5,"point_radius":3},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(stackdriver_nat_gateway_router_googleapis_com_nat_allocated_ports{gateway_name=~\"$gateway_name\"})
    by (gateway_name, region)","series_name_format":"{{gateway_name}} - {{region}}"}}}}]}},"closedConnectionsPerMinute-3":{"kind":"Panel","spec":{"display":{"name":"Closed
    Connections per Minute"},"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05,"line_width":1.5,"point_radius":3},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(stackdriver_nat_gateway_router_googleapis_com_nat_closed_connections_count{gateway_name=~\"$gateway_name\"})
    by (gateway_name, region) / 60","series_name_format":"{{gateway_name}} - {{region}}"}}}}]}},"maximumPortUsage-8":{"kind":"Panel","spec":{"display":{"name":"Maximum
    Port Usage"},"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05,"line_width":1.5,"point_radius":3},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"max(stackdriver_nat_gateway_router_googleapis_com_nat_port_usage{gateway_name=~\"$gateway_name\"})
    by (gateway_name, region)","series_name_format":"{{gateway_name}} - {{region}}"}}}}]}},"natAllocationFailed-6":{"kind":"Panel","spec":{"display":{"name":"NAT
    Allocation Failed"},"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05,"line_width":1.5,"point_radius":3},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(stackdriver_nat_gateway_router_googleapis_com_nat_nat_allocation_failed{gateway_name=~\"$gateway_name\"})
    by (gateway_name, region)","series_name_format":"{{gateway_name}} - {{region}}"}}}}]}},"newConnectionsPerSecond-7":{"kind":"Panel","spec":{"display":{"name":"New
    Connections per Second"},"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05,"line_width":1.5,"point_radius":3},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(stackdriver_nat_gateway_router_googleapis_com_nat_new_connections_count{gateway_name=~\"$gateway_name\"})
    by (gateway_name, region) / 60","series_name_format":"{{gateway_name}} - {{region}}"}}}}]}},"openConnections-13":{"kind":"Panel","spec":{"display":{"name":"Open
    Connections"},"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05,"line_width":1.5,"point_radius":3},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(stackdriver_nat_gateway_router_googleapis_com_nat_open_connections{gateway_name=~\"$gateway_name\"})
    by (gateway_name, region)","series_name_format":"{{gateway_name}} - {{region}}"}}}}]}},"receivedBytesPerSecond-9":{"kind":"Panel","spec":{"display":{"name":"Received
    Bytes per Second"},"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05,"line_width":1.5,"point_radius":3},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(stackdriver_nat_gateway_router_googleapis_com_nat_received_bytes_count{gateway_name=~\"$gateway_name\"})
    by (gateway_name, region) / 60","series_name_format":"{{gateway_name}} - {{region}}"}}}}]}},"receivedPacketsDroppedPerMinute-4":{"kind":"Panel","spec":{"display":{"name":"Received
    Packets Dropped per Minute"},"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05,"line_width":1.5,"point_radius":3},"y_axis":{"unit":{"abbreviate":false,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(stackdriver_nat_gateway_router_googleapis_com_nat_dropped_received_packets_count{gateway_name=~\"$gateway_name\"})
    by (gateway_name, region)","series_name_format":"{{gateway_name}} - {{region}}"}}}}]}},"receivedPacketsPerSecond-10":{"kind":"Panel","spec":{"display":{"name":"Received
    Packets per Second"},"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05,"line_width":1.5,"point_radius":3},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(stackdriver_nat_gateway_router_googleapis_com_nat_received_packets_count{gateway_name=~\"$gateway_name\"})
    by (gateway_name, region) / 60","series_name_format":"{{gateway_name}} - {{region}}"}}}}]}},"sentBytesPerSecond-11":{"kind":"Panel","spec":{"display":{"name":"Sent
    Bytes per Second"},"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05,"line_width":1.5,"point_radius":3},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(stackdriver_nat_gateway_router_googleapis_com_nat_sent_bytes_count{gateway_name=~\"$gateway_name\"})
    by (gateway_name, region) / 60","series_name_format":"{{gateway_name}} - {{region}}"}}}}]}},"sentPacketsDroppedPerMinute-5":{"kind":"Panel","spec":{"display":{"name":"Sent
    Packets Dropped per Minute"},"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05,"line_width":1.5,"point_radius":3},"y_axis":{"unit":{"abbreviate":false,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(stackdriver_nat_gateway_router_googleapis_com_nat_dropped_sent_packets_count{gateway_name=~\"$gateway_name\"})
    by (gateway_name, region)","series_name_format":"{{gateway_name}} - {{region}}"}}}}]}},"sentPacketsPerSecond-12":{"kind":"Panel","spec":{"display":{"name":"Sent
    Packets per Second"},"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05,"line_width":1.5,"point_radius":3},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum(stackdriver_nat_gateway_router_googleapis_com_nat_sent_packets_count{gateway_name=~\"$gateway_name\"})
    by (gateway_name, region) / 60","series_name_format":"{{gateway_name}} - {{region}}"}}}}]}}},"variables":[{"kind":"ListVariable","spec":{"allow_all_value":true,"allow_multiple":true,"custom_all_value":".*","default_value":"$__all","name":"gateway_name","plugin":{"kind":"PrometheusLabelValuesVariable","spec":{"label_name":"gateway_name","matchers":["stackdriver_nat_gateway_router_googleapis_com_nat_nat_allocation_failed"]}}}}],"events":[]},"spec_version":"1"}'
