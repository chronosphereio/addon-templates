api_version: v1/config
kind: Dashboard
spec:
  slug: kubernetes--views--global
  name: Kubernetes / Views / Global
  collection_slug: k8s-collection
  dashboard_json: '{"kind":"Dashboard","spec":{"events":[],"panels":{"clusterCpuUtilization-72":{"kind":"Panel","spec":{"display":{"name":"Cluster
    CPU Utilization"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"max":1,"min":0,"unit":{"abbreviate":true,"decimal_places":2,"kind":"PercentDecimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"sum(rate(node_cpu_seconds_total{cluster_name=~\"$cluster_name\",mode!=\"idle\"}[$__rate_interval]))
    /\nsum(rate(node_cpu_seconds_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))","series_name":{"name_pattern":"Avg
    Node Utilization %","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_resource_requests{cluster_name=~\"$cluster_name\",resource=\"cpu\"})
    / \nsum(machine_cpu_cores{cluster_name=~\"$cluster_name\"})","series_name":{"name_pattern":"Requested","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_resource_limits{cluster_name=~\"$cluster_name\",resource=\"cpu\"})
    / \nsum(machine_cpu_cores{cluster_name=~\"$cluster_name\"})","series_name":{"name_pattern":"Limit","type":"Labels"}}}}}]}},"clusterMemoryUtilization-55":{"kind":"Panel","spec":{"display":{"description":"","name":"Cluster
    Memory Utilization"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"max":1,"min":0,"unit":{"abbreviate":true,"kind":"PercentDecimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(node_memory_MemTotal_bytes{cluster_name=~\"$cluster_name\"}
    - node_memory_MemAvailable_bytes{cluster_name=~\"$cluster_name\"}) / sum(node_memory_MemTotal_bytes{cluster_name=~\"$cluster_name\"})","series_name":{"name_pattern":"%
    Memory usage","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_resource_requests{cluster_name=~\"$cluster_name\",resource=\"memory\"})
    / sum(machine_memory_bytes{cluster_name=~\"$cluster_name\"})","series_name":{"name_pattern":"Requests","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_resource_limits{cluster_name=~\"$cluster_name\",resource=\"memory\"})
    / sum(machine_memory_bytes)","series_name":{"name_pattern":"Limit","type":"Labels"}}}}}]}},"containerRestartsByNamespace-88":{"kind":"Panel","spec":{"display":{"description":"No
    data is generally a good thing here.","name":"Container Restarts by namespace"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(increase(kube_pod_container_status_restarts_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))
    by (namespace)","series_name":{"name_pattern":"{{ namespace }}","type":"Labels"}}}}}]}},"cpuCoreThrottledByInstance-83":{"kind":"Panel","spec":{"display":{"description":"No
    data is generally a good thing here.","name":"CPU Core Throttled by instance "},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"Table","position":"Right","values":["Min","Max","Mean"]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":false,"kind":"Decimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"disabled":false,"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"sum(rate(node_cpu_core_throttle_seconds_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))
    by (instance)","series_name":{"name_pattern":"{{ instance }}","type":"Labels"}}}}}]}},"cpuThrottledPeriodsByNamespace-82":{"kind":"Panel","spec":{"display":{"description":"No
    data is generally a good thing here.","name":"CPU Throttled Periods by namespace"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"Table","position":"Right","values":["Min","Max","Mean"]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Seconds"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"sum(rate(container_cpu_cfs_throttled_periods_total{cluster_name=~\"$cluster_name\",image!=\"\"}[$__rate_interval]))
    by (namespace)","series_name":{"name_pattern":"{{ namespace }}","type":"Labels"}}}}}]}},"cpuUsage-37":{"kind":"Panel","spec":{"display":{"name":"CPU
    Usage"},"plugin":{"kind":"StatChart","spec":{"calculation":"Mean","thresholds":{"base":{"color":"rgb(255,
    255, 255)"},"steps":[]},"unit":{"abbreviate":false,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(rate(node_cpu_seconds_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))","series_name":{"name_pattern":"Real","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_resource_requests{cluster_name=~\"$cluster_name\",resource=\"cpu\"})","series_name":{"name_pattern":"Requests","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_resource_limits{cluster_name=~\"$cluster_name\",resource=\"cpu\"})","series_name":{"name_pattern":"Limits","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(machine_cpu_cores{cluster_name=~\"$cluster_name\"})","series_name":{"name_pattern":"Total","type":"Labels"}}}}}]}},"cpuUsage-77":{"kind":"Panel","spec":{"display":{"name":"CPU  Usage"},"plugin":{"kind":"BarChart","spec":{"calculation":"LastNumber","unit":{"abbreviate":true,"kind":"PercentDecimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(rate(node_cpu_seconds_total{cluster_name=~\"$cluster_name\",mode!=\"idle\"}[$__rate_interval]))
    /\nsum(rate(node_cpu_seconds_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))","series_name":{"name_pattern":"Real","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_resource_requests{cluster_name=~\"$cluster_name\",resource=\"cpu\"})
    / \nsum(machine_cpu_cores{cluster_name=~\"$cluster_name\"})","series_name":{"name_pattern":"Requests","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_resource_limits{cluster_name=~\"$cluster_name\",resource=\"cpu\"})
    / \nsum(machine_cpu_cores{cluster_name=~\"$cluster_name\"})","series_name":{"name_pattern":"Limits","type":"Labels"}}}}}]}},"cpuUtilizationByNamespace-46":{"kind":"Panel","spec":{"display":{"name":"CPU
    Utilization by namespace"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"Table","position":"Right","values":["Min","Max","Mean"]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"stack":"All"},"y_axis":{"max":1,"min":0,"unit":{"abbreviate":true,"kind":"PercentDecimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"sum
    by (namespace) (rate(container_cpu_usage_seconds_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))
    / on() group_left()\nsum(rate(container_cpu_usage_seconds_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))","series_name":{"name_pattern":"{{
    namespace }}","type":"Labels"}}}}}]}},"cpuUtilizationByPod-54":{"kind":"Panel","spec":{"display":{"name":"CPU
    Utilization by Pod"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"Table","position":"Right","values":["Min","Max","Mean"]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"stack":"All"},"y_axis":{"max":1,"min":0,"unit":{"abbreviate":true,"kind":"PercentDecimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"avg(rate(container_cpu_usage_seconds_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))
    by (pod)","series_name":{"name_pattern":"{{ pod }}","type":"Labels"}}}}}]}},"globalNetworkUtilizationByDevice-44":{"kind":"Panel","spec":{"display":{"description":"Dropped
    noisy virtual devices for readability.","name":"Global Network Utilization by
    device"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Bytes"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"sum(rate(node_network_receive_bytes_total{cluster_name=~\"$cluster_name\",device!~\"lxc.*|veth.*\"}[$__rate_interval]))
    by (device)","series_name":{"name_pattern":"Received : {{ device }}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"-
    sum(rate(node_network_transmit_bytes_total{cluster_name=~\"$cluster_name\",device!~\"lxc.*|veth.*\"}[$__rate_interval]))  by
    (device)","series_name":{"name_pattern":"Transmitted : {{ device }}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":""}}}}]}},"kubernetesPodsQoSClasses-84":{"kind":"Panel","spec":{"display":{"name":"Kubernetes
    Pods QoS classes"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_status_qos_class{cluster_name=~\"$cluster_name\"})
    by (qos_class)","series_name":{"name_pattern":"{{ qos_class }} pods","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_info{cluster_name=~\"$cluster_name\"})","series_name":{"name_pattern":"Total
    pods","type":"Labels"}}}}}]}},"kubernetesPodsStatusReason-85":{"kind":"Panel","spec":{"display":{"name":"Kubernetes
    Pods Status Reason"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_status_reason{cluster_name=~\"$cluster_name\"})
    by (reason)","series_name":{"name_pattern":"{{ reason }}","type":"Labels"}}}}}]}},"kubernetesResourceCount-52":{"kind":"Panel","spec":{"display":{"description":"","name":"Kubernetes
    Resource Count"},"formulas":[],"links":[],"plugin":{"kind":"BarChart","spec":{"calculation":"LastNumber","limit":25,"mode":"value","sort":"desc","thresholds":{"mode":"Percent","steps":[]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_namespace_labels{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Namespaces","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_status_running{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Running
    Containers","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_status_phase{cluster_name=~\"$cluster_name\",phase=\"running\"})","series_name":{"name_pattern":"Running
    Pods","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_service_info{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Services","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_endpoint_info{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Endpoints","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_ingress_info{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Ingresses","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_deployment_labels{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Deployments","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_statefulset_labels{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Statefulsets","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_daemonset_labels{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Daemonsets","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_persistentvolumeclaim_info{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Persistent
    Volume Claims","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_hpa_labels{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Horizontal
    Pod Autoscalers","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_configmap_info{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Configmaps","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_secret_info{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Secrets","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_networkpolicy_labels{cluster_name=\"$cluster_name\"})","series_name":{"name_pattern":"Network
    Policies","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"count(count
    by (node) (kube_node_info{cluster_name=\"$cluster_name\"}))","series_name":{"name_pattern":"Nodes","type":"Labels"}}}}}]}},"memoryUtilizationByInstance-73":{"kind":"Panel","spec":{"display":{"description":"","name":"Memory
    Utilization by instance"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"Table","position":"Right","values":["Min","Max","Mean"]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Bytes"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"sum(node_memory_MemTotal_bytes{cluster_name=~\"$cluster_name\"}
    - node_memory_MemAvailable_bytes{cluster_name=~\"$cluster_name\"}) by (instance)","series_name":{"name_pattern":"{{
    instance }}","type":"Labels"}}}}}]}},"memoryUtilizationByNamespace-50":{"kind":"Panel","spec":{"display":{"description":"","name":"Memory
    Utilization by namespace"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"Table","position":"Right","values":["Min","Max","Mean"]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Bytes"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"sum(container_memory_working_set_bytes{cluster_name=~\"$cluster_name\"})
    by (namespace)","series_name":{"name_pattern":"{{ namespace }}","type":"Labels"}}}}}]}},"namespaces-59":{"kind":"Panel","spec":{"display":{"name":"Namespaces"},"plugin":{"kind":"StatChart","spec":{"calculation":"Last","show_series_name":"Never","thresholds":{"base":{"color":"#438FEB"},"steps":[]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"count(count
    by(namespace) (kube_pod_info{cluster_name=~\"$cluster_name\"}))","series_name":{"name_pattern":"{{namespace}}","type":"Labels"}}}}}]}},"networkReceivedByNamespace-79":{"kind":"Panel","spec":{"display":{"name":"Network
    Received by namespace"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Bytes"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"sum(rate(container_network_receive_bytes_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))
    by (namespace)","series_name":{"name_pattern":"Received : {{ namespace }}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"-
    sum(rate(container_network_transmit_bytes_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))
    by (namespace)","series_name":{"name_pattern":"Transmitted : {{ namespace }}","type":"Labels"}}}}}]}},"networkReceivedLoopbackOnlyByInstance-81":{"kind":"Panel","spec":{"display":{"description":"Dropped
    noisy virtual devices for readability.","name":"Network Received (loopback only)
    by instance"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Bytes"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"sum(rate(container_network_receive_bytes_total{cluster_name=~\"$cluster_name\",
    device=\"lo\"}[$__rate_interval])) by (instance)","series_name":{"name_pattern":"Received
    bytes in {{ instance }}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"disabled":true,"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"-
    sum(rate(container_network_transmit_bytes_total{cluster_name=~\"$cluster_name\",device=\"lo\"}[$__rate_interval]))
    by (instance)","series_name":{"name_pattern":"Transmitted bytes in {{ instance
    }}","type":"Labels"}}}}}]}},"networkReceivedWithoutLoopbackByInstance-56":{"kind":"Panel","spec":{"display":{"description":"Dropped
    noisy virtual devices for readability.","name":"Network Received (without loopback)  by
    instance"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Bytes"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"sum(rate(container_network_receive_bytes_total{cluster_name=~\"$cluster_name\",device!~\"lxc.*|veth.*|lo\"}[$__rate_interval]))
    by (instance)","series_name":{"name_pattern":"Received bytes in {{ instance }}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"-
    sum(rate(container_network_transmit_bytes_total{cluster_name=~\"$cluster_name\",device!~\"lxc.*|veth.*|lo\"}[$__rate_interval]))
    by (instance)","series_name":{"name_pattern":"Transmitted bytes in {{ instance
    }}","type":"Labels"}}}}}]}},"networkSaturationPacketsDropped-53":{"kind":"Panel","spec":{"display":{"name":"Network
    Saturation - Packets dropped"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":false,"kind":"Decimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"sum(rate(node_network_receive_drop_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))","series_name":{"name_pattern":"Packets
    dropped (receive)","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"-
    sum(rate(node_network_transmit_drop_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))","series_name":{"name_pattern":"Packets
    dropped (transmit)","type":"Labels"}}}}}]}},"nodes-63":{"kind":"Panel","spec":{"display":{"name":"Nodes"},"plugin":{"kind":"StatChart","spec":{"calculation":"Last","show_series_name":"Never","thresholds":{"base":{"color":"#438FEB"},"steps":[]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"count(count
    by (node) (kube_node_info{cluster_name=~\"$cluster_name\"}))"}}}}]}},"oomEventsByNamespace-87":{"kind":"Panel","spec":{"display":{"description":"No
    data is generally a good thing here.","name":"OOM Events by namespace"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(increase(container_oom_events_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))
    by (namespace)","series_name":{"name_pattern":"{{ namespace }}","type":"Labels"}}}}}]}},"ramUsage-39":{"kind":"Panel","spec":{"display":{"name":"RAM
    Usage"},"plugin":{"kind":"StatChart","spec":{"calculation":"Mean","thresholds":{"base":{"color":"rgb(255,
    255, 255)"},"steps":[]},"unit":{"abbreviate":true,"kind":"Bytes"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(node_memory_MemTotal_bytes{cluster_name=~\"$cluster_name\"}
    - node_memory_MemAvailable_bytes{cluster_name=~\"$cluster_name\"})","series_name":{"name_pattern":"Real","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_resource_requests{cluster_name=~\"$cluster_name\",resource=\"memory\"})","series_name":{"name_pattern":"Requests","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_resource_limits{cluster_name=~\"$cluster_name\",resource=\"memory\"})","series_name":{"name_pattern":"Limits","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(machine_memory_bytes{cluster_name=~\"$cluster_name\"})","series_name":{"name_pattern":"Total","type":"Labels"}}}}}]}},"ramUsage-78":{"kind":"Panel","spec":{"display":{"description":"","name":"RAM
    Usage"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"position":"Bottom"},"visual":{"area_opacity":0,"line_width":1.5},"y_axis":{"unit":{"kind":"PercentDecimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(node_memory_MemTotal_bytes{cluster_name=~\"$cluster_name\"}
    - node_memory_MemAvailable_bytes{cluster_name=~\"$cluster_name\"}) / sum(node_memory_MemTotal_bytes{cluster_name=~\"$cluster_name\"})","series_name":{"name_pattern":"Real","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_resource_requests{cluster_name=~\"$cluster_name\",resource=\"memory\"})
    / sum(machine_memory_bytes{cluster_name=~\"$cluster_name\"})","series_name":{"name_pattern":"Requests","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_container_resource_limits{cluster_name=~\"$cluster_name\",resource=\"memory\"})
    / sum(machine_memory_bytes)","series_name":{"name_pattern":"Limits","type":"Labels"}}}}}]}},"runningPods-62":{"kind":"Panel","spec":{"display":{"description":"","name":"Running
    Pods"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"Last","show_series_name":"Never","thresholds":{"base":{"color":"#438FEB"},"steps":[]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_pod_status_phase{cluster_name=~\"$cluster_name\",phase=\"running\"})"}}}}]}},"totalNetworkReceivedWithAllVirtualDevicesByInstance-80":{"kind":"Panel","spec":{"display":{"name":"Total
    Network Received (with all virtual devices) by instance"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby"},"visual":{"area_opacity":0.05},"y_axis":{"unit":{"abbreviate":true,"kind":"Bytes"}},"y_axis_right":{"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"sum(rate(container_network_receive_bytes_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))
    by (instance)","series_name":{"name_pattern":"Received bytes in {{ instance }}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"$resolution","query":"-
    sum(rate(container_network_transmit_bytes_total{cluster_name=~\"$cluster_name\"}[$__rate_interval]))
    by (instance)","series_name":{"name_pattern":"Transmitted bytes in {{ instance
    }}","type":"Labels"}}}}}]}}},"layouts":[{"kind":"Grid","spec":{"display":{"title":"Overview","collapse":{"open":false}},"items":[{"x":0,"y":0,"width":6,"height":8,"content":{"$ref":"#/spec/panels/cpuUsage-77"}},{"x":6,"y":0,"width":6,"height":8,"content":{"$ref":"#/spec/panels/ramUsage-78"}},{"x":12,"y":0,"width":2,"height":4,"content":{"$ref":"#/spec/panels/nodes-63"}},{"x":14,"y":0,"width":10,"height":12,"content":{"$ref":"#/spec/panels/kubernetesResourceCount-52"}},{"x":12,"y":4,"width":2,"height":4,"content":{"$ref":"#/spec/panels/namespaces-59"}},{"x":0,"y":8,"width":6,"height":4,"content":{"$ref":"#/spec/panels/cpuUsage-37"}},{"x":6,"y":8,"width":6,"height":4,"content":{"$ref":"#/spec/panels/ramUsage-39"}},{"x":12,"y":8,"width":2,"height":4,"content":{"$ref":"#/spec/panels/runningPods-62"}}]}},{"kind":"Grid","spec":{"display":{"title":"Resources","collapse":{"open":false}},"items":[{"x":0,"y":0,"width":12,"height":8,"content":{"$ref":"#/spec/panels/clusterCpuUtilization-72"}},{"x":12,"y":0,"width":12,"height":8,"content":{"$ref":"#/spec/panels/clusterMemoryUtilization-55"}},{"x":0,"y":8,"width":12,"height":8,"content":{"$ref":"#/spec/panels/cpuUtilizationByNamespace-46"}},{"x":12,"y":8,"width":12,"height":8,"content":{"$ref":"#/spec/panels/memoryUtilizationByNamespace-50"}},{"x":0,"y":16,"width":12,"height":8,"content":{"$ref":"#/spec/panels/cpuUtilizationByPod-54"}},{"x":12,"y":16,"width":12,"height":8,"content":{"$ref":"#/spec/panels/memoryUtilizationByInstance-73"}},{"x":0,"y":24,"width":12,"height":8,"content":{"$ref":"#/spec/panels/cpuThrottledPeriodsByNamespace-82"}},{"x":12,"y":24,"width":12,"height":8,"content":{"$ref":"#/spec/panels/cpuCoreThrottledByInstance-83"}}]}},{"kind":"Grid","spec":{"display":{"title":"Kubernetes","collapse":{"open":false}},"items":[{"x":0,"y":0,"width":12,"height":9,"content":{"$ref":"#/spec/panels/kubernetesPodsQoSClasses-84"}},{"x":12,"y":0,"width":12,"height":9,"content":{"$ref":"#/spec/panels/kubernetesPodsStatusReason-85"}},{"x":0,"y":9,"width":12,"height":9,"content":{"$ref":"#/spec/panels/oomEventsByNamespace-87"}},{"x":12,"y":9,"width":12,"height":9,"content":{"$ref":"#/spec/panels/containerRestartsByNamespace-88"}}]}},{"kind":"Grid","spec":{"display":{"title":"Network","collapse":{"open":false}},"items":[{"x":0,"y":0,"width":12,"height":8,"content":{"$ref":"#/spec/panels/globalNetworkUtilizationByDevice-44"}},{"x":12,"y":0,"width":12,"height":8,"content":{"$ref":"#/spec/panels/networkSaturationPacketsDropped-53"}},{"x":0,"y":8,"width":12,"height":8,"content":{"$ref":"#/spec/panels/networkReceivedByNamespace-79"}},{"x":12,"y":8,"width":12,"height":8,"content":{"$ref":"#/spec/panels/totalNetworkReceivedWithAllVirtualDevicesByInstance-80"}},{"x":0,"y":16,"width":12,"height":8,"content":{"$ref":"#/spec/panels/networkReceivedWithoutLoopbackByInstance-56"}},{"x":12,"y":16,"width":12,"height":8,"content":{"$ref":"#/spec/panels/networkReceivedLoopbackOnlyByInstance-81"}}]}}],"variables":[{"kind":"ListVariable","spec":{"allow_all_value":false,"allow_multiple":false,"custom_all_value":".*","default_value":"prod","name":"cluster_name","plugin":{"kind":"PrometheusLabelValuesVariable","spec":{"label_name":"cluster_name","matchers":["container_cpu_usage_seconds_total"]}},"refresh":"TimeRangeUpdate"}},{"kind":"ListVariable","spec":{"allow_all_value":false,"allow_multiple":false,"default_value":"5m","name":"resolution","plugin":{"kind":"StaticListVariable","spec":{"values":[{"label":"30s","value":"30s"},{"label":"1m","value":"1m"},{"label":"3m","value":"3m"},{"label":"5m","value":"5m"},{"label":"10m","value":"10m"}]}}}}],"duration":"1h"},"spec_version":"1"}'
