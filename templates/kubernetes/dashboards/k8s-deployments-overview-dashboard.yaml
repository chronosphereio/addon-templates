api_version: v1/config
kind: Dashboard
spec:
  slug: k8s-deployments-overview
  name: K8s Deployments Overview
  collection_slug: kubernetes-collection
  dashboard_json: '{"kind":"Dashboard","spec":{"events":[],"panels":{"OutdatedReplicas":{"kind":"Panel","spec":{"display":{"description":"","name":"Max
    Unavailable Replicas in Rolling Update"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"thresholds":{"mode":"Absolute","steps":[{"color":"#2CB46B","value":0}]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment) (kube_deployment_spec_strategy_rollingupdate_max_unavailable{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"deployment:{{deployment}}","type":"Labels"}}}}}]}},"Requested-6":{"kind":"Panel","spec":{"display":{"description":"","name":"Requested"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"base":{"color":"#2CB46B"},"steps":[]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_deployment_spec_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","queryType":"Range","reducer":"LastNumber","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"RequestedNotAvailable-14":{"kind":"Panel","spec":{"display":{"description":"","name":"Requested
    And Unavailable"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"base":{"color":"#2CB46B"},"steps":[]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_deployment_spec_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})
    - sum(kube_deployment_status_replicas_available{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","queryType":"Range","reducer":"LastNumber","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"available-0":{"kind":"Panel","spec":{"display":{"description":"","name":"Available"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"base":{"color":"#2CB46B"},"steps":[]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_deployment_status_replicas_available{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","queryType":"Range","reducer":"LastNumber","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"cpuRequestsLimitsAndUsage-26":{"kind":"Panel","spec":{"display":{"description":"","name":"CPU
    Limits, Requests & Usage"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (cluster_name, deployment, namespace) (kube_pod_container_resource_requests{env=~\"$env\",resource=\"cpu\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"Requests:
    cluster:{{cluster_name}} deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (cluster_name, deployment, namespace) (rate(container_cpu_usage_seconds_total{env=~\"$env\",container!=\"\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"}[$__rate_interval]))","series_name":{"name_pattern":"Usage:
    cluster:{{cluster_name}} deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (cluster_name, deployment, namespace) (kube_pod_container_resource_limits{env=~\"$env\",resource=\"cpu\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"Limits:
    cluster:{{cluster_name}} deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"cpuUsageByDeployment-22":{"kind":"Panel","spec":{"display":{"description":"","name":"CPU
    Usage by Deployment"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (cluster_name, namespace, deployment) (rate(container_cpu_usage_seconds_total{env=~\"$env\",container!=\"\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"}[$__rate_interval]))","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"deployments-16":{"kind":"Panel","spec":{"display":{"description":"","name":"Total
    Deployments"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"avg
    by (cluster_name, namespace, deployment) (kube_deployment_status_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"deployments-38":{"kind":"Panel","spec":{"display":{"description":"","name":"Deployments"},"formulas":[],"links":[],"plugin":{"kind":"BarChart","spec":{"calculation":"LastNumber","limit":25,"mode":"value","sort":"desc","unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment) (kube_deployment_status_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"deployment:{{deployment}}","type":"Labels"}}}}}]}},"diskUsage-34":{"kind":"Panel","spec":{"display":{"description":"","name":"Disk
    Usage"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, namespace, cluster_name) (container_fs_usage_bytes{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"diskUsage-35":{"kind":"Panel","spec":{"display":{"description":"","name":"Disk
    Usage %"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"thresholds":{"mode":"Absolute","steps":[{"color":"#EA4747","value":100}]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"kind":"Percent"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum
    by (deployment, namespace, cluster_name)(container_fs_usage_bytes{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"}
    /\n\ncontainer_fs_limit_bytes{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"memoryRequestsLimitsAndUsage-27":{"kind":"Panel","spec":{"display":{"description":"","name":"Memory
    Limits, Requests & Usage"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, namespace, cluster_name) (kube_pod_container_resource_requests{env=~\"$env\",resource=\"memory\",cluster_name=~\"$kube_cluster_name\",k8s_deployment_name=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"Requests:
    cluster:{{cluster_name}} deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, namespace, cluster_name) (kube_pod_container_resource_limits{env=~\"$env\",resource=\"memory\",cluster_name=~\"$kube_cluster_name\",k8s_deployment_name=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"Limits:
    cluster:{{cluster_name}} deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"query":"sum
    by (deployment, namespace, cluster_name) (container_memory_usage_bytes{env=~\"$env\",container!=\"\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"Usage:
    cluster:{{cluster_name}} deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"memoryUsageByDeployment-23":{"kind":"Panel","spec":{"display":{"description":"","name":"Memory
    Usage by Deployment"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, namespace, cluster_name) (container_memory_usage_bytes{env=~\"$env\",container!=\"\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"mostCpuIntensiveDeployments-25":{"kind":"Panel","spec":{"display":{"description":"","name":"Top
    CPU Usage Deployments"},"formulas":[],"links":[],"plugin":{"kind":"Table","spec":{"sort":[{"sortBy":"Mean","sortOrder":"desc"}],"transform":{"kind":"Aggregation","labelsToColumns":true,"stats":["Mean"]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, namespace, cluster_name) (rate(container_cpu_usage_seconds_total{env=~\"$env\",container!=\"\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"}[$__rate_interval]))","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"mostDiskIntensiveDeployments-36":{"kind":"Panel","spec":{"display":{"description":"","name":"Top
    Disk Usage Deployments"},"formulas":[],"links":[],"plugin":{"kind":"Table","spec":{"sort":[{"sortBy":"Mean","sortOrder":"desc"}],"transform":{"kind":"Aggregation","labelsToColumns":true,"stats":["Mean"]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, namespace, cluster_name) (container_fs_usage_bytes{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"mostMemoryIntensiveDeployments-24":{"kind":"Panel","spec":{"display":{"description":"","name":"Top
    Memory Usage Deployments"},"formulas":[],"links":[],"plugin":{"kind":"Table","spec":{"sort":[{"sortBy":"Mean","sortOrder":"desc"}],"transform":{"kind":"Aggregation","labelsToColumns":true,"stats":["Mean"]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, namespace, cluster_name) (container_memory_usage_bytes{env=~\"$env\",container!=\"\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\",pod!=\"no_pod\"})","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"mostNetworkIntensiveDeployments-37":{"kind":"Panel","spec":{"display":{"description":"","name":"Top
    Network Usage Deployments (Tx per sec)"},"formulas":[],"links":[],"plugin":{"kind":"Table","spec":{"columnOverrides":[{"properties":{"width":224.33334350585938},"value":"namespace"}],"sort":[{"sortBy":"Mean","sortOrder":"desc"}],"transform":{"kind":"Aggregation","labelsToColumns":true,"stats":["Mean"]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, namespace, cluster_name) (rate(container_network_transmit_bytes_total{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"}[$__rate_interval]))","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"networkErrors-33":{"kind":"Panel","spec":{"display":{"description":"","name":"Network
    Errors (Rx / Tx per sec)"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"thresholds":{"mode":"Absolute","steps":[{"color":"#2CB46B","value":0}]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, namespace, cluster_name) (rate(container_network_receive_errors_total{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"}[$__rate_interval]))","series_name":{"name_pattern":"Receive:
    cluster:{{cluster_name}} deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, namespace, cluster_name) (rate(container_network_transmit_errors_total{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"}[$__rate_interval]))","series_name":{"name_pattern":"Transmit:
    cluster:{{cluster_name}} deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"networkUsageRxTxRate-32":{"kind":"Panel","spec":{"display":{"description":"","name":"Network
    Usage (Rx / Tx per sec)"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, namespace, cluster_name) (rate(container_network_receive_bytes_total{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"}[$__rate_interval]))","series_name":{"name_pattern":"Receive:
    cluster:{{cluster_name}} deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}},{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, namespace, cluster_name) (rate(container_network_transmit_bytes_total{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"}[$__rate_interval]))","series_name":{"name_pattern":"Transmit:
    cluster:{{cluster_name}} deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"outdated-13":{"kind":"Panel","spec":{"display":{"description":"","name":"Outdated"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"base":{"color":"#2CB46B"},"steps":[]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_deployment_status_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})
    - sum(kube_deployment_status_replicas_updated{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","queryType":"Range","reducer":"LastNumber","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"replicas-2":{"kind":"Panel","spec":{"display":{"description":"","name":"Replicas"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"base":{"color":"#2CB46B"},"steps":[]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_deployment_status_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","queryType":"Range","reducer":"LastNumber","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"replicas-3":{"kind":"Panel","spec":{"display":{"description":"","name":"Replicas"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment) (kube_deployment_status_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"deployment:{{deployment}}","type":"Labels"}}}}}]}},"replicasAvailable-1":{"kind":"Panel","spec":{"display":{"description":"","name":"Replicas
    Available"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment) (kube_deployment_status_replicas_available{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"deployment:{{deployment}}","type":"Labels"}}}}}]}},"replicasOutdated-12":{"kind":"Panel","spec":{"display":{"description":"","name":"Outdated
    Replicas"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"thresholds":{"mode":"Absolute","steps":[{"color":"#2CB46B","value":0}]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment) (kube_deployment_status_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})
    - sum by (deployment) (kube_deployment_status_replicas_updated{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"deployment:{{deployment}}","type":"Labels"}}}}}]}},"replicasPerDeployments-17":{"kind":"Panel","spec":{"display":{"description":"","name":"Replicas
    Change (Weekly)"},"formulas":[],"links":[],"plugin":{"kind":"BarChart","spec":{"calculation":"LastNumber","limit":25,"mode":"value","sort":"desc","thresholds":{"steps":[{"color":"#C53C3F","value":-1000000000},{"color":"#2D8658","value":0}]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (cluster_name, namespace, deployment) (kube_deployment_status_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})
    - \nsum by (cluster_name, namespace, deployment) (kube_deployment_status_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"}
    offset 1w)","series_name":{"name_pattern":"cluster:{{cluster_name}} deployment:{{deployment}}
    namespace:{{namespace}}","type":"Labels"}}}}}]}},"replicasRequested-7":{"kind":"Panel","spec":{"display":{"description":"","name":"Replicas
    Requested"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment) (kube_deployment_spec_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"deployment:{{deployment}}","type":"Labels"}}}}}]}},"replicasRequestedButNotAvailable-11":{"kind":"Panel","spec":{"display":{"description":"","name":"Replicas
    Requested Not Available"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment, cluster_name, namespace) (kube_deployment_spec_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})
    - sum by (deployment, cluster_name, namespace) (kube_deployment_status_replicas_available{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"replicasRequestedButNotAvailable-19":{"kind":"Panel","spec":{"display":{"description":"","name":"Replicas
    Requested but Not Available"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (cluster_name, namespace, deployment)  (kube_deployment_spec_replicas{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})
    - \nsum by (cluster_name, namespace, deployment) (kube_deployment_status_replicas_available{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"replicasUnavailable-5":{"kind":"Panel","spec":{"display":{"description":"","name":"Unavailable
    Replicas"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (cluster_name, namespace, deployment) (kube_deployment_status_replicas_unavailable{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"replicasUpdated-9":{"kind":"Panel","spec":{"display":{"description":"","name":"Updated
    Replicas"},"formulas":[],"links":[],"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"List","position":"Bottom","values":[]},"tooltip":{"mode":"nearby","sort":"Descending"},"visual":{"area_opacity":0.05,"null_behavior":"Connected"},"y_axis":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}},"y_axis_right":{"min":0,"unit":{"abbreviate":true,"kind":"Decimal"}}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum
    by (deployment) (kube_deployment_status_replicas_updated{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","series_name":{"name_pattern":"deployment:{{deployment}}","type":"Labels"}}}}}]}},"unavailable-4":{"kind":"Panel","spec":{"display":{"description":"","name":"Unavailable"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"base":{"color":"#2CB46B"},"steps":[]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_deployment_status_replicas_unavailable{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","queryType":"Range","reducer":"LastNumber","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}},"updated-8":{"kind":"Panel","spec":{"display":{"description":"","name":"Updated"},"formulas":[],"links":[],"plugin":{"kind":"StatChart","spec":{"calculation":"LastNumber","thresholds":{"base":{"color":"#2CB46B"},"steps":[]},"unit":{"abbreviate":true,"kind":"Decimal"}}},"queries":[{"kind":"DataQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"min_step":"","query":"sum(kube_deployment_status_replicas_updated{env=~\"$env\",cluster_name=~\"$kube_cluster_name\",deployment=~\"$kube_deployment\",namespace=~\"$kube_namespace\"})","queryType":"Range","reducer":"LastNumber","series_name":{"name_pattern":"cluster:{{cluster_name}}
    deployment:{{deployment}} namespace:{{namespace}}","type":"Labels"}}}}}]}}},"layouts":[{"kind":"Grid","spec":{"display":{"title":"Overview","collapse":{"open":true}},"items":[{"x":0,"y":0,"width":24,"height":10,"content":{"$ref":"#/spec/panels/deployments-38"}},{"x":0,"y":10,"width":6,"height":7,"content":{"$ref":"#/spec/panels/replicas-2"}},{"x":0,"y":17,"width":6,"height":7,"content":{"$ref":"#/spec/panels/Requested-6"}},{"x":6,"y":10,"width":6,"height":7,"content":{"$ref":"#/spec/panels/available-0"}},{"x":14,"y":17,"width":6,"height":7,"content":{"$ref":"#/spec/panels/updated-8"}},{"x":12,"y":10,"width":6,"height":7,"content":{"$ref":"#/spec/panels/unavailable-4"}},{"x":6,"y":17,"width":8,"height":7,"content":{"$ref":"#/spec/panels/RequestedNotAvailable-14"}},{"x":18,"y":10,"width":6,"height":7,"content":{"$ref":"#/spec/panels/outdated-13"}},{"x":0,"y":24,"width":12,"height":8,"content":{"$ref":"#/spec/panels/deployments-16"}},{"x":12,"y":24,"width":12,"height":8,"content":{"$ref":"#/spec/panels/replicasPerDeployments-17"}},{"x":0,"y":32,"width":12,"height":8,"content":{"$ref":"#/spec/panels/replicasRequestedButNotAvailable-19"}}]}},{"kind":"Grid","spec":{"display":{"title":"Replicas
    by Deployment","collapse":{"open":true}},"items":[{"x":0,"y":0,"width":12,"height":8,"content":{"$ref":"#/spec/panels/replicas-3"}},{"x":12,"y":0,"width":12,"height":8,"content":{"$ref":"#/spec/panels/replicasRequested-7"}},{"x":0,"y":8,"width":12,"height":8,"content":{"$ref":"#/spec/panels/replicasAvailable-1"}},{"x":12,"y":8,"width":12,"height":8,"content":{"$ref":"#/spec/panels/replicasUpdated-9"}},{"x":0,"y":16,"width":12,"height":8,"content":{"$ref":"#/spec/panels/replicasUnavailable-5"}},{"x":0,"y":24,"width":12,"height":8,"content":{"$ref":"#/spec/panels/replicasRequestedButNotAvailable-11"}},{"x":12,"y":16,"width":12,"height":8,"content":{"$ref":"#/spec/panels/replicasOutdated-12"}},{"x":12,"y":24,"width":12,"height":8,"content":{"$ref":"#/spec/panels/OutdatedReplicas"}}]}},{"kind":"Grid","spec":{"display":{"title":"CPU
    Resources","collapse":{"open":true}},"items":[{"x":0,"y":0,"width":14,"height":8,"content":{"$ref":"#/spec/panels/cpuUsageByDeployment-22"}},{"x":14,"y":0,"width":10,"height":16,"content":{"$ref":"#/spec/panels/mostCpuIntensiveDeployments-25"}},{"x":0,"y":8,"width":14,"height":8,"content":{"$ref":"#/spec/panels/cpuRequestsLimitsAndUsage-26"}}]}},{"kind":"Grid","spec":{"display":{"title":"Memory
    Resources","collapse":{"open":true}},"items":[{"x":0,"y":0,"width":14,"height":8,"content":{"$ref":"#/spec/panels/memoryUsageByDeployment-23"}},{"x":14,"y":0,"width":10,"height":16,"content":{"$ref":"#/spec/panels/mostMemoryIntensiveDeployments-24"}},{"x":0,"y":8,"width":14,"height":8,"content":{"$ref":"#/spec/panels/memoryRequestsLimitsAndUsage-27"}}]}},{"kind":"Grid","spec":{"display":{"title":"Disk
    Resources","collapse":{"open":true}},"items":[{"x":0,"y":0,"width":14,"height":8,"content":{"$ref":"#/spec/panels/diskUsage-34"}},{"x":0,"y":8,"width":14,"height":8,"content":{"$ref":"#/spec/panels/diskUsage-35"}},{"x":14,"y":0,"width":10,"height":16,"content":{"$ref":"#/spec/panels/mostDiskIntensiveDeployments-36"}}]}},{"kind":"Grid","spec":{"display":{"title":"Network
    Resources","collapse":{"open":true}},"items":[{"x":0,"y":0,"width":14,"height":8,"content":{"$ref":"#/spec/panels/networkUsageRxTxRate-32"}},{"x":0,"y":8,"width":14,"height":8,"content":{"$ref":"#/spec/panels/networkErrors-33"}},{"x":14,"y":0,"width":10,"height":16,"content":{"$ref":"#/spec/panels/mostNetworkIntensiveDeployments-37"}}]}}],"variables":[{"kind":"ListVariable","spec":{"allow_all_value":true,"allow_multiple":true,"custom_all_value":".*","default_value":"$__all","display":{"name":"env"},"name":"env","plugin":{"kind":"PrometheusLabelValuesVariable","spec":{"label_name":"env"}},"refresh":"DashboardLoad"}},{"kind":"ListVariable","spec":{"allow_all_value":true,"allow_multiple":true,"custom_all_value":".*","default_value":"$__all","display":{"name":"kube_cluster_name"},"name":"kube_cluster_name","plugin":{"kind":"PrometheusLabelValuesVariable","spec":{"label_name":"cluster_name","matchers":[]}}}},{"kind":"ListVariable","spec":{"allow_all_value":true,"allow_multiple":true,"custom_all_value":".*","default_value":"$__all","display":{"name":"kube_deployment"},"name":"kube_deployment","plugin":{"kind":"PrometheusLabelValuesVariable","spec":{"label_name":"deployment","matchers":[]}}}},{"kind":"ListVariable","spec":{"allow_all_value":true,"allow_multiple":true,"custom_all_value":".*","default_value":"$__all","display":{"name":"kube_namespace"},"name":"kube_namespace","plugin":{"kind":"PrometheusLabelValuesVariable","spec":{"label_name":"namespace","matchers":[]}}}}],"duration":"2d"},"spec_version":"1"}'
